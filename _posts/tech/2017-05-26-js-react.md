---
layout: post
title: react
excerpt: "A JavaScript library for building user interfaces<br/><ul><li>Declarative</li><li>Component-Based</li><li>Learn Once, Write Anywhere</li></ul>"
category: tech
---


## react
那么回到React本身，React的创新性和优点在哪里呢？
我个人认为是其用嵌套的JavaScript对象来表示DOM结构，即Virtual DOM并通过Virtual DOM的渲染过程
把DOM操作放到内存里，在这个过程还可以实现DOM diff算法和DOM的生命周期管理；

## React key
[React之key详解](https://segmentfault.com/a/1190000009149186)
- key属性的使用场景最多的还是由数组动态创建的子组件的情况
- key值是一个永久且唯一的值
- 数组非变动时, 可以使用 index 代替, 但不推荐
- react根据key决定销毁重新创建还是更新组件

> 不推荐写法
```javascript
render() {
    return <ul>{ this.state.data.map((v, index) => <Item key={index} v={v} />) }</ul>
}
// Item 组件
render() {
    return <li>{ this.props.v }<input type="text" /></li>;
}
```

> 推荐写法
```javascript
//this.state.users内容
this.state = {
 users: [{id:1,name: '张三'}, {id:2, name: '李四'}, {id: 2, name: "王五"}],
}
render()
  return (
      <div>
        <h3>用户列表</h3>
        {this.state.users.map(u => <div key={u.id}>{u.id}:{u.name}</div>)}
      </div>
  )
);
```

> 注意事项:
- key 属性是添加到自定义组件上, 而不是子组件内部的顶层元素上.
- key值的唯一是有范围的, 即在数组生成的同级同类型的组件上保持一致,而不是所有组件的key都要保持一致.
- 其他地方也可以使用key, 相同的key标识同一组件,react不会销毁重建, 只会更新.

## JSX -> VirtualDOM
```
// 转换前
const element = (
    <div>
        <h3>用户列表</h3>
        {[<div key={1}>1: 周一</div>, <div key={2}>2: 周二</div>, <div key={3}>3: 周三</div>]}
    </div>
);
// 转换后
"use strict";
var element = React.createElement(
    "div",
    null,
    React.createElement("h3", null, "用户列表"),
    [
        React.createElement("div", { key: 1 }, "1: 周一"),
        React.createElement("div", { key: 2 }, "2: 周二"),
        React.createElement("div", { key: 3 }, "3: 周三")
    ]
);
```

## Provider
Provider这个模块是作为整个App的容器，在你原有的AppContainer的基础上再包上一层，
它的工作很简单，就是接受Redux的store作为props，并将其声明为context的属性之一，
子组件可以在声明了contextTypes之后可以方便的通过this.context.store访问到store

